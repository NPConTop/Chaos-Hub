if not game:IsLoaded() then game.Loaded:Wait() end

local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")
local PlayerGui = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Blur effect
local blur = Instance.new("BlurEffect", Lighting)
blur.Size = 12

-- ScreenGui
local gui = Instance.new("ScreenGui", PlayerGui)
gui.Name = "ChaosLoader"
gui.IgnoreGuiInset = true
gui.ResetOnSpawn = false

gui.Destroying:Connect(function()
	if blur then blur:Destroy() end
end)

-- Main Frame
local frame = Instance.new("Frame", gui)
frame.AnchorPoint = Vector2.new(0.5, 0.5)
frame.Position = UDim2.new(0.5, 0, 1.5, 0)
frame.Size = UDim2.new(0, 420, 0, 280)
frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
frame.BackgroundTransparency = 0.3
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)

-- Rainbow Border
local rainbow = Instance.new("UIStroke", frame)
rainbow.Thickness = 3
rainbow.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
rainbow.LineJoinMode = Enum.LineJoinMode.Round

-- Animate Rainbow Border
task.spawn(function()
	local h = 0
	while rainbow and rainbow.Parent do
		h = (h + 0.01) % 1
		rainbow.Color = ColorSequence.new(Color3.fromHSV(h, 1, 1))
		task.wait(0.03)
	end
end)

-- Animate In
TweenService:Create(frame, TweenInfo.new(0.8, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), {
	Position = UDim2.new(0.5, 0, 0.5, 0)
}):Play()

-- Title
local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, -50, 0, 40)
title.Position = UDim2.new(0, 10, 0, 5)
title.BackgroundTransparency = 1
title.Text = "CHAOS MULTI LOADER"
title.Font = Enum.Font.FredokaOne
title.TextSize = 26
title.TextXAlignment = Enum.TextXAlignment.Left

-- Description
local desc = Instance.new("TextLabel", frame)
desc.Size = UDim2.new(1, -20, 0, 22)
desc.Position = UDim2.new(0, 10, 0, 42)
desc.BackgroundTransparency = 1
desc.Text = "Choose your script below"
desc.Font = Enum.Font.GothamBold
desc.TextSize = 14

-- Animate Rainbow Text
task.spawn(function()
	local h = 0
	while gui and gui.Parent do
		h = (h + 0.01) % 1
		local color = Color3.fromHSV(h, 1, 1)
		title.TextColor3 = color
		desc.TextColor3 = color
		task.wait(0.03)
	end
end)

-- Close Button
local closeButton = Instance.new("TextButton", frame)
closeButton.Size = UDim2.new(0, 40, 0, 40)
closeButton.Position = UDim2.new(1, -45, 0, 5)
closeButton.BackgroundTransparency = 1
closeButton.Text = "X"
closeButton.Font = Enum.Font.FredokaOne
closeButton.TextColor3 = Color3.fromRGB(255, 70, 70)
closeButton.TextSize = 24
closeButton.ZIndex = 10
closeButton.MouseButton1Click:Connect(function()
	gui:Destroy()
end)

-- Tabs Frame
local tabsFrame = Instance.new("Frame", frame)
tabsFrame.Size = UDim2.new(1, -20, 0, 30)
tabsFrame.Position = UDim2.new(0, 10, 0, 70)
tabsFrame.BackgroundTransparency = 0.1
tabsFrame.BackgroundColor3 = Color3.fromHSV(0, 1, 1)

-- Rainbow tabs background
task.spawn(function()
	local h = 0
	while tabsFrame and tabsFrame.Parent do
		h = (h + 0.005) % 1
		tabsFrame.BackgroundColor3 = Color3.fromHSV(h, 1, 1)
		task.wait(0.03)
	end
end)

-- Scrolling Area
local scrolling = Instance.new("ScrollingFrame", frame)
scrolling.Size = UDim2.new(1, -20, 1, -115)
scrolling.Position = UDim2.new(0, 10, 0, 110)
scrolling.CanvasSize = UDim2.new(0, 0, 0, 0)
scrolling.BackgroundTransparency = 1
scrolling.ScrollBarThickness = 4

local layout = Instance.new("UIListLayout", scrolling)
layout.Padding = UDim.new(0, 8)
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	scrolling.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)
end)

-- Search Bar
local searchBox = Instance.new("Search.....", frame)
searchBox.PlaceholderText = "Search..."
searchBox.Size = UDim2.new(1, -20, 0, 25)
searchBox.Position = UDim2.new(0, 10, 1, -30)
searchBox.Font = Enum.Font.Gotham
searchBox.TextSize = 14
searchBox.TextColor3 = Color3.new(1,1,1)
searchBox.BackgroundColor3 = Color3.fromRGB(40,40,40)
Instance.new("UICorner", searchBox).CornerRadius = UDim.new(0, 6)

-- Credits Label
local credits = Instance.new("TextLabel", frame)
credits.Size = UDim2.new(1, -20, 0, 20)
credits.Position = UDim2.new(0, 10, 1, -5)
credits.BackgroundTransparency = 1
credits.Font = Enum.Font.GothamSemibold
credits.Text = "Credits: NPC"
credits.TextSize = 12
credits.TextXAlignment = Enum.TextXAlignment.Right

-- Rainbow Text Animation
task.spawn(function()
	local h = 0
	while credits and credits.Parent do
		h = (h + 0.01) % 1
		credits.TextColor3 = Color3.fromHSV(h, 1, 1)
		task.wait(0.03)
	end
end)

-- Rainbow Divider
local function createRainbowDivider()
	local divider = Instance.new("Frame", scrolling)
	divider.Size = UDim2.new(1, 0, 0, 2)
	divider.BorderSizePixel = 0
	divider.BackgroundColor3 = Color3.fromHSV(0, 1, 1)
	task.spawn(function()
		local h = 0
		while divider and divider.Parent do
			h = (h + 0.01) % 1
			divider.BackgroundColor3 = Color3.fromHSV(h, 1, 1)
			task.wait(0.03)
		end
	end)
end

-- Button Creator
local allButtons = {}
local function createButton(text, callback)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1, 0, 0, 36)
	btn.Text = text
	btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 16
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
	btn.MouseButton1Click:Connect(callback)
	btn.Parent = scrolling
	table.insert(allButtons, btn)
end

-- Script Loader
local function loadScripts(labelText, scriptList)
	local label = Instance.new("TextLabel", scrolling)
	label.Size = UDim2.new(1, 0, 0, 24)
	label.BackgroundTransparency = 1
	label.Text = labelText
	label.Font = Enum.Font.GothamBold
	label.TextSize = 14
	label.TextColor3 = Color3.new(1, 1, 1)
	label.Parent = scrolling
	createRainbowDivider()

	for _, data in ipairs(scriptList) do
		createButton(data[1], function()
			local runStatus = Instance.new("TextLabel", gui)
			runStatus.Size = UDim2.new(0, 220, 0, 30)
			runStatus.Position = UDim2.new(1, -230, 1, -40)
			runStatus.AnchorPoint = Vector2.new(0, 1)
			runStatus.BackgroundTransparency = 1
			runStatus.Text = "SCRIPT IS RUN..."
			runStatus.Font = Enum.Font.GothamBold
			runStatus.TextSize = 14
			runStatus.TextColor3 = Color3.new(1, 1, 1)
			runStatus.Parent = gui

			TweenService:Create(runStatus, TweenInfo.new(0.4), {TextTransparency = 0}):Play()
			task.wait(1)
			TweenService:Create(runStatus, TweenInfo.new(0.4), {TextTransparency = 1}):Play()
			task.delay(0.5, function() runStatus:Destroy() end)

			local success, err = pcall(function()
				loadstring(data[2])()
			end)
			if not success then
				warn("Script Error for " .. data[1] .. ": " .. tostring(err))
			end

			gui:Destroy()
		end)
	end
end

-- Search Filter
searchBox:GetPropertyChangedSignal("Text"):Connect(function()
	local query = string.lower(searchBox.Text)
	for _, btn in ipairs(allButtons) do
		btn.Visible = string.find(string.lower(btn.Text), query) ~= nil
	end
end)

-- === SCRIPTS ===
local tabs = {
	["One Fruit"] = {
		{"üçâ Nexus Hub", 'loadstring(game:HttpGet("https://api.luarmor.net/files/v3/loaders/86de6d175e585ef6c1c7f4bdebfc57cc.lua"))()'},
		{"üçç OMG Hub", 'loadstring(game:HttpGet("https://raw.githubusercontent.com/Omgshit/Scripts/main/MainLoader.lua"))()'},
	},
	["Blox Fruit"] = {
		{"THG Hub", 'loadstring(game:HttpGet("https://pastefy.app/fEXb91kF/raw"))()'},
		{"Redz Hub", 'loadstring(game:HttpGet("https://pastefy.app/KLyLxd0w/raw"))()'},
	},
	["Universal"] = {
		{"‚öôÔ∏è Infinite Yield", 'loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()'},
		{"üïµÔ∏è Simple Spy", 'loadstring(game:HttpGet("https://raw.githubusercontent.com/exxtremestuffs/SimpleSpySource/master/SimpleSpy.lua"))()'},
	},
	["Beaks"] = {
		{"Mukuro Hub", 'loadstring(game:HttpGet("https://pastebin.com/raw/f1jU2QZg"))()'},
	}
}

-- Tabs Button
local function switchTab(tabName)
	scrolling:ClearAllChildren()
	table.clear(allButtons)
	loadScripts(tabName, tabs[tabName])
end

for name, _ in pairs(tabs) do
	local tabBtn = Instance.new("TextButton", tabsFrame)
	tabBtn.Size = UDim2.new(0, 100, 1, 0)
	tabBtn.Text = name
	tabBtn.Font = Enum.Font.GothamBold
	tabBtn.TextSize = 14
	tabBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
	tabBtn.TextColor3 = Color3.fromHSV(math.random(), 1, 1)
	Instance.new("UICorner", tabBtn).CornerRadius = UDim.new(0, 6)
	tabBtn.MouseButton1Click:Connect(function()
		switchTab(name)
	end)
end

-- === AMJA: Anti Kick & Anti Ban Protection ===
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local mt = getrawmetatable(game)

-- Bypass :Kick()
setreadonly(mt, false)
local oldNamecall = mt.__namecall

mt.__namecall = newcclosure(function(self, ...)
    local method = getnamecallmethod()
    if method == "Kick" or method == "kick" then
        warn("[NPC] Blocked Kick via __namecall")
        return nil
    end
    return oldNamecall(self, ...)
end)

-- Override Kick()
LocalPlayer.Kick = function()
    warn("[NPC] Blocked Kick via Kick() function")
end

-- RemoteEvent protection
task.spawn(function()
    for _, v in pairs(getgc(true)) do
        if typeof(v) == "function" and islclosure(v) then
            local info = debug.getinfo(v)
            if info.name == "FireServer" and info.short_src:lower():find("kick") then
                hookfunction(v, function() warn("[NPC] Blocked suspicious Remote Kick!") end)
            end
        end
    end
end)

-- Auto remove suspicious Remotes
task.spawn(function()
    while true do
        for _, v in pairs(game:GetDescendants()) do
            if v:IsA("RemoteEvent") or v:IsA("BindableEvent") then
                local name = v.Name:lower()
                if name:find("kick") or name:find("ban") or name:find("punish") then
                    warn("[NPC] Removed suspicious remote:", v:GetFullName())
                    v:Destroy()
                end
            end
        end
        task.wait(3)
    end
end)

-- npc Status Label
local npcLabel = Instance.new("TextLabel", gui)
npcLabel.Size = UDim2.new(0, 160, 0, 24)
npcLabel.Position = UDim2.new(0, 10, 1, -34)
npcLabel.AnchorPoint = Vector2.new(0, 1)
npcLabel.BackgroundTransparency = 1
npcLabel.Text = "‚úî NPC Protection Active"
npcLabel.Font = Enum.Font.GothamBold
npcLabel.TextSize = 14

-- Rainbow effect
task.spawn(function()
	local h = 0
	while npcLabel and npcLabel.Parent do
		h = (h + 0.01) % 1
		npcLabel.TextColor3 = Color3.fromHSV(h, 1, 1)
		task.wait(0.03)
	end
end)

-- Default tab
switchTab("One Fruit")
